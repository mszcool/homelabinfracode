# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

#
# Loopback interface
#
auto lo
iface lo inet loopback

#
# Main interface
#

iface {{ pve_main_interface.bridge_ports | default('none') }} inet manual

auto {{ pve_main_interface.name }}
iface {{ pve_main_interface.name }} inet {{ pve_main_interface.method }}
{% if pve_main_interface.method == 'static' %}
    address {{ pve_main_interface.address }}
    netmask {{ pve_main_interface.netmask | default('255.255.255.0') }}
{% if pve_main_interface.gateway is defined %}
    gateway {{ pve_main_interface.gateway }}
{% endif %}
{% endif %}
    bridge_ports {{ pve_main_interface.bridge_ports | default('none') }}
    bridge_fd 0
    bridge_stp off
{% if pve_main_interface.bridge_vlan_aware is defined %}
    bridge_vlan_aware {{ pve_main_interface.bridge_vlan_aware | lower }}
{% endif %}

{% if pve_ext_interface is defined %}
# External interface

iface {{ pve_ext_interface.bridge_ports | default('none') }} inet manual

auto {{ pve_ext_interface.name }}
iface {{ pve_ext_interface.name }} inet {{ pve_ext_interface.method }}
{% if pve_ext_interface.method == 'static' %}
    address {{ pve_ext_interface.address }}
    netmask {{ pve_ext_interface.netmask | default('255.255.255.0') }}
{% if pve_ext_interface.gateway is defined %}
    gateway {{ pve_ext_interface.gateway }}
{% endif %}
{% endif %}
    bridge_ports {{ pve_ext_interface.bridge_ports | default('none') }}
    bridge_fd 0
    bridge_stp off
{% if pve_ext_interface.bridge_vlan_aware is defined %}
    bridge_vlan_aware {{ pve_ext_interface.bridge_vlan_aware | lower }}
{% endif %}
{% endif %}